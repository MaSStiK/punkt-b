<script>
    // Получем сохраненные данные
    let userData = JSON.parse(localStorage.getItem("userData"))

    if (userData === null) {
        location.href = "../login"
    }

    // Если нету логина или пароля, перекидывает на вход
    if (!userData.hasOwnProperty("login") || !userData.hasOwnProperty("password")) {
        localStorage.removeItem("userData")
        location.href = "../login"
    }

    if (userData?.secret !== "") {
        location.href = "../admin"
    }
</script>

<script>
    function GSapiManagers(action, data, func) {
        // Ссылка на скрипт Google API (Managers)
        const GoogleSheetURL = "https://script.google.com/macros/s/AKfycbxwFW19ink7hmVh-JoZTMYXrtSRv2-RAVed_kEJjH9s2s1n4DEuWFvWJcz31vzVuTs0/exec"
        $.ajax({
            crossDomain: true,
            url: GoogleSheetURL + "?action=" + action,
            method: "GET",
            dataType: 'JSONP',
            data: data,
            success: func
        })
    }


    function GSapiCabinet(action, data, func) {
        // Ссылка на скрипт Google API (Cabinet)
        const GoogleSheetURL = "https://script.google.com/macros/s/AKfycbx1wpIAhaRDeHVrJFCIMwwhtEvuBx-jW5NlF-QmfUlfVCjhHAI_B7r2ssIZhRRPufTlLA/exec"
        $.ajax({
            crossDomain: true,
            url: GoogleSheetURL + "?action=" + action,
            method: "GET",
            dataType: 'JSONP',
            data: data,
            success: func
        })
    }


    // ----------GSapiManagers----------
    // Получить актуальную информацию о профиле
    function GSgetUserData(login, password, func) {
        GSapiManagers("getUserData", {login: login, password: password}, func)
    }

    // Обновить информацию о профиле
    function GSchangeUserData(data, func) {
        GSapiManagers("changeUserData", data, func)
    }


    // ----------GSapiCabinet----------
    // Функиия получения всех тестирований
    function GSgetDiagnostics(func) {
        GSapiCabinet("getDiagnostics", {}, func)
    }

    function GSgetClients(data, func) {
        GSapiCabinet("getClients", data, func)
    }

    function GSsetClientCheched(data, func) {
        GSapiCabinet("setClientCheched", data, func)
    }

    function GSsetClientArchive(data, func) {
        GSapiCabinet("setClientArchive", data, func)
    }
</script>